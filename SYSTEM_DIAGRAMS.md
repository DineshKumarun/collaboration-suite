# ğŸ¨ System Diagrams

## Overall Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COLLABORATION SERVER                      â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Video Relay â”‚  â”‚ Audio Mixer  â”‚  â”‚  Chat Server â”‚      â”‚
â”‚  â”‚   UDP:5000   â”‚  â”‚   UDP:5001   â”‚  â”‚   TCP:5003   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚Screen Relay  â”‚  â”‚ File Server  â”‚  â”‚   Control    â”‚      â”‚
â”‚  â”‚   TCP:5002   â”‚  â”‚   TCP:5004   â”‚  â”‚   TCP:5005   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚              â”‚              â”‚              â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
                         LAN/Internet
                              â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚              â”‚              â”‚              â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   CLIENT 1     â”‚ â”‚   CLIENT 2     â”‚ â”‚   CLIENT 3     â”‚
   â”‚   (Alice)      â”‚ â”‚    (Bob)       â”‚ â”‚   (Carol)      â”‚
   â”‚                â”‚ â”‚                â”‚ â”‚                â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
   â”‚  â”‚Video Gridâ”‚  â”‚ â”‚  â”‚Video Gridâ”‚  â”‚ â”‚  â”‚Video Gridâ”‚  â”‚
   â”‚  â”‚ â”Œâ”€â”€â”¬â”€â”€â”  â”‚  â”‚ â”‚  â”‚ â”Œâ”€â”€â”¬â”€â”€â”  â”‚  â”‚ â”‚  â”‚ â”Œâ”€â”€â”¬â”€â”€â”  â”‚  â”‚
   â”‚  â”‚ â”‚Meâ”‚Boâ”‚  â”‚  â”‚ â”‚  â”‚ â”‚Alâ”‚Meâ”‚  â”‚  â”‚ â”‚  â”‚ â”‚Alâ”‚Boâ”‚  â”‚  â”‚
   â”‚  â”‚ â””â”€â”€â”´â”€â”€â”˜  â”‚  â”‚ â”‚  â”‚ â””â”€â”€â”´â”€â”€â”˜  â”‚  â”‚ â”‚  â”‚ â””â”€â”€â”´â”€â”€â”˜  â”‚  â”‚
   â”‚  â”‚ â”Œâ”€â”€â”¬â”€â”€â”  â”‚  â”‚ â”‚  â”‚ â”Œâ”€â”€â”¬â”€â”€â”  â”‚  â”‚ â”‚  â”‚ â”Œâ”€â”€â”¬â”€â”€â”  â”‚  â”‚
   â”‚  â”‚ â”‚Caâ”‚  â”‚  â”‚  â”‚ â”‚  â”‚ â”‚Caâ”‚  â”‚  â”‚  â”‚ â”‚  â”‚ â”‚Meâ”‚  â”‚  â”‚  â”‚
   â”‚  â”‚ â””â”€â”€â”´â”€â”€â”˜  â”‚  â”‚ â”‚  â”‚ â””â”€â”€â”´â”€â”€â”˜  â”‚  â”‚ â”‚  â”‚ â””â”€â”€â”´â”€â”€â”˜  â”‚  â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
   â”‚                â”‚ â”‚                â”‚ â”‚                â”‚
   â”‚  ğŸ’¬ Chat       â”‚ â”‚  ğŸ’¬ Chat       â”‚ â”‚  ğŸ’¬ Chat       â”‚
   â”‚  ğŸ“ Files      â”‚ â”‚  ğŸ“ Files      â”‚ â”‚  ğŸ“ Files      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow: Video

```
Alice's Client
     â”‚
     â”‚ 1. Capture webcam frame (640x480)
     â–¼
  [OpenCV VideoCapture]
     â”‚
     â”‚ 2. Compress to JPEG (quality 80)
     â–¼
  [cv2.imencode]
     â”‚
     â”‚ 3. Add client_id prefix
     â–¼
  [client_id_len | client_id | chunk_idx | total | jpeg_data]
     â”‚
     â”‚ 4. Send via UDP to server:5000
     â–¼
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SERVER - Video Relay
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     â”‚
     â”‚ 5. Receive packet, parse client_id
     â–¼
  [Extract: sender = "alice"]
     â”‚
     â”‚ 6. Relay to all OTHER clients
     â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                     â”‚                     â”‚
  â–¼                     â–¼                     â–¼
Bob's Client      Carol's Client       (not Alice)
  â”‚                     â”‚
  â”‚ 7. Receive chunks   â”‚
  â–¼                     â–¼
[Reassemble JPEG]   [Reassemble JPEG]
  â”‚                     â”‚
  â”‚ 8. Decode image     â”‚
  â–¼                     â–¼
[cv2.imdecode]      [cv2.imdecode]
  â”‚                     â”‚
  â”‚ 9. Display in grid[alice]
  â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Alice   â”‚         â”‚ Alice   â”‚
â”‚ (video) â”‚         â”‚ (video) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow: Audio

```
Alice          Bob           Carol
  â”‚             â”‚              â”‚
  â”‚ Mic input   â”‚ Mic input    â”‚ Mic input
  â–¼             â–¼              â–¼
[Capture]    [Capture]      [Capture]
  â”‚             â”‚              â”‚
  â”‚ PCM 16-bit  â”‚ PCM 16-bit   â”‚ PCM 16-bit
  â–¼             â–¼              â–¼
[Add ID]     [Add ID]       [Add ID]
  â”‚             â”‚              â”‚
  â”‚ UDP:5001    â”‚ UDP:5001     â”‚ UDP:5001
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SERVER - Audio Mixer
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                â”‚
                â”‚ 1. Collect audio from all
                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Buffer:      â”‚
         â”‚  alice: [..] â”‚
         â”‚  bob:   [..] â”‚
         â”‚  carol: [..] â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ 2. Mix (average samples)
                â–¼
         [mixed = mean(all)]
                â”‚
                â”‚ 3. Broadcast to all
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚           â”‚           â”‚
    â–¼           â–¼           â–¼
  Alice       Bob        Carol
    â”‚           â”‚           â”‚
    â”‚ Play      â”‚ Play      â”‚ Play
    â–¼           â–¼           â–¼
 Speakers    Speakers   Speakers
 (hears      (hears     (hears
  Bob+Carol)  Alice+Car) Alice+Bob)
```

## Data Flow: Chat

```
Alice types: "Hello!"
     â”‚
     â”‚ Press Enter
     â–¼
[Create message with timestamp]
     â”‚
     â–¼
{"sender": "Alice", "message": "Hello!", "time": 12345}
     â”‚
     â”‚ Send to server TCP:5003
     â–¼
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SERVER - Chat Broadcast
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     â”‚
     â”‚ Relay to all connected chat clients
     â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                     â”‚                     â”‚
  â–¼                     â–¼                     â–¼
Alice               Bob                 Carol
  â”‚                     â”‚                     â”‚
  â”‚ Display locally     â”‚ Receive & display   â”‚ Receive & display
  â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚[14:30] Alice:â”‚  â”‚[14:30] Alice:â”‚  â”‚[14:30] Alice:â”‚
â”‚  Hello!      â”‚  â”‚  Hello!      â”‚  â”‚  Hello!      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow: File Sharing

```
Alice: "Share report.pdf"
     â”‚
     â”‚ 1. Select file
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ report.pdf      â”‚
â”‚ Size: 2.5 MB    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 2. Send upload command
     â–¼
TCP:5004 â†’ SERVER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SERVER - File Upload
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     â”‚
     â”‚ 3. Receive file data
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ shared_files/       â”‚
â”‚   abc123_report.pdf â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 4. Store metadata
     â–¼
files["abc123"] = {
  "filename": "report.pdf",
  "size": 2621440,
  "uploader": "Alice"
}
     â”‚
     â”‚ 5. Notify ALL clients
     â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                     â”‚                     â”‚
  â–¼                     â–¼                     â–¼
Alice               Bob                 Carol
  â”‚                     â”‚                     â”‚
  â”‚                     â”‚ Add to file list    â”‚
  â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ğŸ“ Files:     â”‚  â”‚ğŸ“ Files:     â”‚  â”‚ğŸ“ Files:     â”‚
â”‚â€¢ report.pdf  â”‚  â”‚â€¢ report.pdf  â”‚  â”‚â€¢ report.pdf  â”‚
â”‚  (2.5 MB)    â”‚  â”‚  (2.5 MB)    â”‚  â”‚  (2.5 MB)    â”‚
â”‚  - from Aliceâ”‚  â”‚  - from Aliceâ”‚  â”‚  - from Aliceâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚                     â”‚
                        â”‚ Double-click        â”‚
                        â–¼                     â–¼
                  Download request      Download request
                        â”‚                     â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â–¼
                             SERVER sends file
```

## Session Management Flow

```
Client Startup
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Login Dialog    â”‚
â”‚ Username: Alice â”‚
â”‚ Server: 192...  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ Click Connect
     â–¼
TCP:5005 â†’ SERVER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SERVER - Control
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     â”‚
     â”‚ 1. Receive client info
     â–¼
clients["alice"] = {
  "username": "Alice",
  "address": ("192.168.1.10", 5432),
  "control_conn": <socket>
}
     â”‚
     â”‚ 2. Send current client list
     â–¼
{"status": "connected", "clients": [
  {"id": "bob", "username": "Bob"},
  {"id": "carol", "username": "Carol"}
]}
     â”‚
     â”‚ 3. Notify others of new client
     â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                     â”‚                     â”‚
  â–¼                     â–¼                     â–¼
Bob                 Carol              (not Alice)
  â”‚                     â”‚
  â”‚ Receive join event  â”‚
  â–¼                     â–¼
{"type": "client_update",
 "action": "joined",
 "client_id": "alice",
 "username": "Alice"}
  â”‚                     â”‚
  â”‚ Add to client list  â”‚
  â–¼                     â–¼
clients["alice"] = {...}
  â”‚                     â”‚
  â”‚ Update video grid   â”‚
  â–¼                     â–¼
Add new video box for Alice
```

## Client GUI State Machine

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Not Connectedâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Click "Join Session"
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Connecting  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â” Error
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
       â”‚                â–¼
       â”‚ Success   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â–¼           â”‚ Failed  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  Connected   â”‚
â”‚  (Session    â”‚
â”‚   Active)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Auto-start features
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Video streaming        â”‚
â”‚ â€¢ Audio capturing/playingâ”‚
â”‚ â€¢ Chat connected         â”‚
â”‚ â€¢ File server connected  â”‚
â”‚ â€¢ Video grid populated   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Features active
       â”‚
       â”‚ User clicks "Leave Session"
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Disconnectingâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Stop all services
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Not Connectedâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Threading Architecture

```
CLIENT PROCESS
â”‚
â”œâ”€ Main Thread (GUI)
â”‚  â””â”€ Tkinter event loop
â”‚     â€¢ Handle button clicks
â”‚     â€¢ Update display
â”‚     â€¢ Process queues
â”‚
â”œâ”€ Control Thread
â”‚  â””â”€ Handle server messages
â”‚     â€¢ Join/leave events
â”‚     â€¢ File notifications
â”‚     â€¢ Client updates
â”‚
â”œâ”€ Video Send Thread
â”‚  â””â”€ Capture â†’ Compress â†’ Send
â”‚     â€¢ 30 FPS loop
â”‚     â€¢ JPEG encoding
â”‚     â€¢ UDP transmission
â”‚
â”œâ”€ Video Receive Thread
â”‚  â””â”€ Receive â†’ Decode â†’ Queue
â”‚     â€¢ UDP reception
â”‚     â€¢ Chunk assembly
â”‚     â€¢ Frame queueing
â”‚
â”œâ”€ Audio Send Thread
â”‚  â””â”€ Capture â†’ Send
â”‚     â€¢ Microphone capture
â”‚     â€¢ UDP transmission
â”‚
â””â”€ Audio Receive Thread
   â””â”€ Receive â†’ Play
      â€¢ UDP reception
      â€¢ Speaker playback

SERVER PROCESS
â”‚
â”œâ”€ Main Thread
â”‚  â””â”€ Keep server running
â”‚
â”œâ”€ Control Accept Thread
â”‚  â””â”€ Accept new clients
â”‚
â”œâ”€ Control Handler Threads (N)
â”‚  â””â”€ One per client
â”‚     â€¢ Handle commands
â”‚     â€¢ Send updates
â”‚
â”œâ”€ Video Relay Thread
â”‚  â””â”€ UDP relay loop
â”‚     â€¢ Receive from any
â”‚     â€¢ Send to all others
â”‚
â”œâ”€ Audio Relay Thread
â”‚  â””â”€ UDP relay + mix
â”‚     â€¢ Collect from all
â”‚     â€¢ Mix audio
â”‚     â€¢ Broadcast mixed
â”‚
â”œâ”€ Screen Relay Thread
â”‚  â””â”€ TCP relay
â”‚
â”œâ”€ Chat Server Thread
â”‚  â””â”€ TCP broadcast
â”‚
â””â”€ File Server Thread
   â””â”€ Handle uploads/downloads
```

## Network Packet Visualization

### Video Packet
```
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1B â”‚   N bytes   â”‚  2B  â”‚  2B   â”‚   M bytes   â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ID â”‚  client_id  â”‚chunk â”‚ total â”‚ jpeg_data   â”‚
â”‚len â”‚   "alice"   â”‚ idx  â”‚chunks â”‚ [binary]    â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â–²        â–²          â–²       â–²         â–²
  â”‚        â”‚          â”‚       â”‚         â”‚
  5        alice      0       3      [chunk 0]
```

### Audio Packet
```
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1B â”‚   N bytes   â”‚     M bytes         â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ID â”‚  client_id  â”‚   PCM audio data    â”‚
â”‚len â”‚   "bob"     â”‚   [binary samples]  â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Chat Message (JSON)
```json
{
  "type": "chat",
  "sender": "Alice",
  "message": "Hello everyone!",
  "timestamp": 1698765432
}
```

## File Storage Structure

```
collaboration-suite/
â””â”€â”€ shared_files/
    â”œâ”€â”€ abc123_presentation.pdf
    â”œâ”€â”€ def456_report.docx
    â””â”€â”€ ghi789_image.jpg

In-memory:
shared_files = {
  "abc123": {
    "filename": "presentation.pdf",
    "size": 2621440,
    "path": "shared_files/abc123_presentation.pdf",
    "uploader": "Alice"
  },
  "def456": {...},
  "ghi789": {...}
}
```

---

**These diagrams show the complete data flow and architecture of the collaboration suite!**
